<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover">

    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./modules/chart.css">

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="https://static.line-scdn.net/liff/edge/versions/2.5.0/sdk.js"></script>

    <title>Report</title>
</head>

<body>

    <div class="container">

        <div style="background-color: #FFDB01; height:2px; width:80%; padding-top: 0px; border: none; position: -webkit-sticky;
    position: sticky;  margin: auto">
        </div>

    </div>

    <div class="container" style="padding-top:15px;">

        <div class="container mt=20">
            <div class="row">
                <div class="col-1.5">
                    <h1 id="topic">รายงานการขาย</h1>
                </div>

            </div>
        </div>

        <div class="row">
            <div class="col-md-6 col-xl-3 mb-4 col-xs-1">
                <div class="card shadow border-left-primary py-2">
                    <div class="card-body">
                        <div class="row align-items-center no-gutters">
                            <div class="col">
                                <div class="text-uppercase text-xs mb-1" id="dash_head">
                                    <span>รายได้ (สัปดาห์นี้)</span></div>
                            </div>
                        </div>
                        <div class="row align-items-center no-gutters">
                            <div class="col-6">
                                <div class="text" id="number"><span>฿40,000</span></div>
                            </div>

                            <div class="col-6">
                                <div class="text" id="movement" style="color: green;"><span>+
                                        120<br>จากสัปดาห์ก่อน</span></div>
                                <i class="fas fa-calendar fa-2x text-gray-300"></i>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-xl-3 mb-4 col-xs-1">
                <div class="card shadow border-left-primary py-2">
                    <div class="card-body">
                        <div class="row align-items-center no-gutters">
                            <div class="col">
                                <div class="text-uppercase text-xs mb-1" id="dash_head">
                                    <span>จำนวนออเดอร์ (สัปดาห์นี้)</span></div>
                            </div>
                        </div>
                        <div class="row align-items-center no-gutters">
                            <div class="col-6">
                                <div class="text" id="number"><span>50</span></div>
                            </div>

                            <div class="col-6">
                                <div class="text" id="movement" style="color: green;"><span>+
                                        18<br>จากสัปดาห์ก่อน</span></div>
                                <i class="fas fa-calendar fa-2x text-gray-300"></i>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-xl-3 mb-4 col-xs-1">
                <div class="card shadow border-left-primary py-2">
                    <div class="card-body">
                        <div class="row align-items-center no-gutters">
                            <div class="col">
                                <div class="text-uppercase text-xs mb-1" id="dash_head">
                                    <span>รายได้ (เดือนนี้)</span></div>
                            </div>
                        </div>
                        <div class="row align-items-center no-gutters">
                            <div class="col-6">
                                <div class="text" id="number"><span>฿5,550</span></div>
                            </div>

                            <div class="col-6">
                                <div class="text" id="movement" style="color: green;"><span>+ 200<br>จากเดือนก่อน</span>
                                </div>
                                <i class="fas fa-calendar fa-2x text-gray-300"></i>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-xl-3 mb-4 col-xs-1">
                <div class="card shadow border-left-primary py-2">
                    <div class="card-body">
                        <div class="row align-items-center no-gutters">
                            <div class="col">
                                <div class="text-uppercase text-xs mb-1" id="dash_head">
                                    <span>จำนวนออเดอร์ (เดือนนี้)</span></div>
                            </div>
                        </div>
                        <div class="row align-items-center no-gutters">
                            <div class="col-6">
                                <div class="text" id="number"><span>88</span></div>
                            </div>

                            <div class="col-6">
                                <div class="text" id="movement" style="color: red;"><span>- 2<br>จากเดือนก่อน</span>
                                </div>
                                <i class="fas fa-calendar fa-2x text-gray-300"></i>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-xl-3 mb-4 col-xs-1">
                <div class="card shadow border-left-primary py-2">
                    <div class="card-body">
                        <div class="row align-items-center no-gutters">
                            <div class="col">
                                <div class="text-uppercase text-xs mb-1" id="dash_head">
                                    <span>รายได้รวม</span></div>
                            </div>
                        </div>
                        <div class="row align-items-center no-gutters">
                            <div class="col">
                                <div class="text" id="number"><span>฿59,550</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col mb-4 col-xs-1">
                <div class="card shadow border-left-primary py-2">
                    <div class="card-body">
                        <div class="row align-items-center no-gutters">
                            <div class="text-uppercase text-xs mb-1" id="dash_head">
                                <span>สถิติรายได้ย้อนหลัง</span></div>
                        </div>
                        <div class="row align-items-center no-gutters">
                            <div class="chart chart--bar-chart js-bar-chart"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <div class="row">
            <div class="col-md-6 col-xl-3 mb-4 col-xs-1">
                <div class="card shadow border-left-primary py-2">
                    <div class="card-body">
                        <div class="row align-items-center no-gutters">
                            <div class="col">
                                <div class="text-uppercase text-xs mb-1" id="dash_head">
                                    <span>จำนวนลูกค้า</span></div>
                            </div>
                        </div>
                        <div class="row align-items-center no-gutters">
                            <div class="col-6">
                                <div class="text" id="number"><span>50</span></div>
                            </div>

                            <div class="col-6">
                                <div class="text" id="movement" style="color: green;"><span>+
                                        2<br>จากสัปดาห์ก่อน</span></div>
                                <i class="fas fa-calendar fa-2x text-gray-300"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <div class="row">
            <div class="col mb-4 col-xs-1">
                <div class="card shadow border-left-primary py-2">
                    <div class="card-body">
                        <p class="card-title" id="dash_head">ประเภทของลูกค้า</p>
                        <p class="small font-weight-bold" style="font-size: 18px;">แฟนพันธุ์แท้<span class="float-right">10 คน</span>
                        </p>
                        <div class="progress mb-4">
                            <div class="progress-bar bg-success" aria-valuenow="10" aria-valuemin="0"
                                aria-valuemax="100" style="width: 10%;"><span class="sr-only">10%</span></div>
                        </div>
                        <p class="small font-weight-bold" style="font-size: 18px;">ซื้อบ่อย<span class="float-right">20 คน</span></p>
                        <div class="progress mb-4">
                            <div class="progress-bar bg-warning" aria-valuenow="20" aria-valuemin="0"
                                aria-valuemax="100" style="width: 20%;"><span class="sr-only">20%</span></div>
                        </div>
                        <p class="small font-weight-bold" style="font-size: 18px;">นาน ๆ ที<span class="float-right">50 คน</span></p>
                        <div class="progress mb-4">
                            <div class="progress-bar bg-info" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"
                                style="width: 50%;"><span class="sr-only">50%</span></div>
                        </div>
                        <p class="small font-weight-bold" style="font-size: 18px;">ห่างหาย<span class="float-right">20 คน</span></p>
                        <div class="progress mb-4">
                            <div class="progress-bar bg-danger" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"
                                style="width: 20%;"><span class="sr-only">20%</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="col-lg-7 col-xl-8">
                <div class="card shadow border-left-primary py-2">
                    <div class="card-body">
                        <h4 class="card-title" id="dash_head">รายชื่อลูกค้า</h4>
                        <table class="table">
                            <thead>
                                <tr style="font-size: 18px;  text-align: center;">
                                    <th>ชื่อ</th>
                                    <th>จำนวนวันที่ไม่ได้ติดต่อกัน</th>
                                    <th>ยอดซื้อรวม</th>
                                    <th>สถานะ</th>
                                </tr>
                            </thead>
                            <tbody style="font-size: 18px; text-align: center;">
                                <tr>
                                    <td>จุก</td>
                                    <td>120</td>
                                    <td>฿250</td>
                                    <td>
                                        <label class="badge badge-danger">ห่างหาย</label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>มุก</td>
                                    <td>2</td>
                                    <td>฿1,150</td>
                                    <td>
                                        <label class="badge badge-warning" style="color: white;">ซื้อบ่อย</label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>คุก</td>
                                    <td>30</td>
                                    <td>฿550</td>
                                    <td>
                                        <label class="badge badge-info">นาน ๆ ที</label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>กุ๊กไก่</td>
                                    <td>0</td>
                                    <td>฿1,830</td>
                                    <td>
                                        <label class="badge badge-success">แฟนพันธุ์แท้</label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>เดฟ</td>
                                    <td>5</td>
                                    <td>฿1,010</td>
                                    <td>
                                        <label class="badge badge-warning" style="color:  white;">ซื้อบ่อย</label>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>



                <script>

                    const defaults = {
                        width: 300,
                        height: 200,
                        margin: {
                            top: 20,
                            right: 20,
                            bottom: 40,
                            left: 40
                        },
                        axis: true,
                        axisPadding: 5,
                        tickSize: 10,
                        barPadding: 10,
                        ease: d3.easeLinear,
                        nice: true,
                        type: 'rounded'
                    };

                    class BarChart {

                        constructor(element, options) {
                            Object.assign(this, defaults, options);

                            this.element = element;
                            this.init();
                        }

                        dimensions() {
                            const { margin } = this;

                            return [
                                this.width - margin.left - margin.right,
                                this.height - margin.top - margin.bottom
                            ];
                        }

                        init() {
                            const { margin, tickSize, axisPadding } = this;
                            const [innerWidth, innerHeight] = this.dimensions();

                            this.graph = d3.select(this.element)

                            const svg = this.svg = this.graph
                                .append('svg')
                                .attr('width', this.width)
                                .attr('height', this.height)
                                .append('g')
                                .attr('transform', `translate(${margin.left}, ${margin.top})`);

                            const scaleX = this.scaleX = d3
                                .scaleTime()
                                .range([0, innerWidth]);

                            const scaleY = this.scaleY = d3
                                .scaleLinear()
                                .range([innerHeight, 0]);

                            const xAxis = this.xAxis = d3.axisBottom(scaleX)
                                .ticks(5)
                                .tickPadding(8)
                                .tickSize(tickSize);

                            const yAxis = this.yAxis = d3.axisLeft(scaleY)
                                .ticks(3)
                                .tickPadding(8)
                                .tickSize(tickSize);

                            svg
                                .append('g')
                                .attr('class', 'chart__axis chart__axis--x')
                                .attr('transform', `translate(0, ${innerHeight + axisPadding})`)
                                .call(xAxis);

                            svg
                                .append('g')
                                .attr('class', 'chart__axis chart__axis--y')
                                .attr('transform', `translate(${-axisPadding}, 0)`)
                                .call(yAxis);
                        }

                        renderAxis(data, options) {
                            let { svg } = this;

                            svg = options.animate ? svg.transition() : svg;

                            svg
                                .select('.chart__axis--x')
                                .call(this.xAxis);

                            svg
                                .select('.chart__axis--y')
                                .call(this.yAxis);
                        }

                        renderBars(data, options) {
                            const { svg, scaleX, scaleY, barPadding, type, ease } = this;
                            const [innerWidth, innerHeight] = this.dimensions();
                            const barWidth = innerWidth / data.length - barPadding;

                            const column = svg
                                .selectAll('.chart__column')
                                .data(data);

                            column
                                .enter()
                                .append('rect')
                                .attr('class', 'chart__column');

                            (options.animate ? svg.selectAll('.chart__column').transition().ease(ease) : svg.selectAll('.chart__column'))
                                .attr('x', data => scaleX(data.date) - barWidth / 2)
                                .attr('rx', type === 'rounded' ? barWidth / 2 : 0)
                                .attr('ry', type === 'rounded' ? barWidth / 2 : 0)
                                .attr('width', barWidth)
                                .attr('height', innerHeight);

                            column
                                .exit()
                                .remove();

                            const bar = svg
                                .selectAll('.chart__bar')
                                .data(data);

                            bar
                                .enter()
                                .append('rect')
                                .attr('class', 'chart__bar');

                            (options.animate ? svg.selectAll('.chart__bar').transition().ease(ease) : svg.selectAll('.chart__bar'))
                                .attr('x', data => scaleX(data.date) - barWidth / 2)
                                .attr('y', data => scaleY(data.value))
                                .attr('rx', type === 'rounded' ? barWidth / 2 : 0)
                                .attr('ry', type === 'rounded' ? barWidth / 2 : 0)
                                .attr('width', barWidth)
                                .attr('height', data => innerHeight - scaleY(data.value));

                            bar
                                .exit()
                                .remove();
                        }

                        render(data, options = {}) {
                            const { scaleX, scaleY } = this;
                            const domainX = scaleX.domain(d3.extent(data, data => data.date));
                            const domainY = scaleY.domain([0, d3.max(data, data => data.value)]);

                            if (this.nice) {
                                domainX.nice();
                                domainY.nice();
                            }

                            if (this.axis) {
                                this.renderAxis(data, options);
                            }

                            this.renderBars(data, options);
                        }

                        update(data, options) {
                            this.render(data, {
                                animate: true
                            });
                        }

                    }

                    function generateData(n) {
                        const data = [];

                        while (n--) {
                            data.push({
                                date: new Date(Date.now() - (n * 1000 * 60 * 60 * 24)),
                                value: generateRandomInteger(0, 12)
                            });
                        }

                        return data;
                    }

                    function generateRandomInteger(min, max) {
                        return Math.floor(Math.random() * (max - min + 1)) + min;
                    }

                    const barChart = new BarChart('.js-bar-chart');

                    barChart.render(generateData(12));

                    document.querySelector('.js-bar-chart-update').addEventListener('click', () => barChart.update(generateData(24)));


                    document.write('<link rel="stylesheet" href="style.css?cache=' + new Date().getTime() + '">')
                    document.write('<script defer src="app.js?cache=' + new Date().getTime() + '"><\/script>')
                    async function main() {

                        await liff.init({ liffId: "1655215015-V58PdOrL" })

                    }

                    main()
                </script>
</body>


</html>